language: python

dist: trusty
sudo: required

services:
    - docker

rvm:
    - 2.2

python:
    - 2.7

addons:
    apt:
        packages:
            - python-pip

git:
  depth: 1

cache:
    pip: true
    apt: true
    timeout: 691200

before_install:
    - sudo apt-get -qq update
    - sudo apt-get install -o Dpkg::Options::="--force-confold" --force-yes -y -qq docker-engine
    - gem install --quiet rubocop

install:
    - pip install --quiet ansible
    - pip install --quiet molecule

before_script:
    - docker --version
    - ansible --version
    - rubocop --version
    - molecule --version

script:
    - rubocop Vagrantfile

notifications:
    email:
        recipients:
            - build@phalconphp.com
        on_success: change
        on_failure: always
